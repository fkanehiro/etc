#include <vector>
#include <hrpPlanner/PathPlanner.h>
#include "OnlineViewerClient.h"

class problem
{
public:
    problem();
    hrp::BodyPtr addRobot(const std::string& i_name, const std::string &i_url,
                          hrp::BodyPtr i_body=hrp::BodyPtr());
    hrp::BodyPtr addObstacle(const std::string& i_name, const std::string &i_url,
                             hrp::BodyPtr i_body=hrp::BodyPtr());
    hrp::BodyPtr addGoal(const std::string& i_name, const std::string &i_url,
                         hrp::BodyPtr i_body=hrp::BodyPtr());
    void initCollisionCheckPairs(bool checkSelfCollision=true);
    void initOLV();
    void initPlanner();
    void updateOLV();
    bool checkCollision();
    PathEngine::PathPlanner *planner() { return & m_planner; }
private:
    hrp::BodyPtr addBody(const std::string& i_name, const std::string &i_url,
                         hrp::BodyPtr i_body=hrp::BodyPtr());

    std::vector<std::string> m_urls, m_names;
    hrp::BodyPtr m_robot, m_goal;
    std::vector<hrp::BodyPtr> m_obstacles, m_bodies;
    PathEngine::PathPlanner m_planner;
    OpenHRP::WorldState wstate;
    OnlineViewerClient olv;
};
